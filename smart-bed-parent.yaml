substitutions:
  device_name: smart-bed-parent
  friendly_name: Lit parents

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name} 

esp32:
  board: esp32dev
  framework:
    type: arduino

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  use_address: ${device_name}.intra.sberard.fr

  ap:
    ssid: ${device_name}
    password: !secret ap_password

api:
  reboot_timeout: 15min
  encryption:
    key: !secret api_encryption

ota:
  password: !secret ota_password

captive_portal:

logger:
  level: DEBUG

web_server:



#######################################
# Device specific Config Begins Below #
#######################################
packages:
  device_base:
    url: https://github.com/AntorFr/esphome-projects
    file: packages/device_base.yaml
  addressable-effetcs: !include packages/addressable-effetcs.yaml

binary_sensor:
  - platform: gpio
    pin: GPIO32
    name: "Mouvement gauche"
    device_class: motion
  - platform: gpio
    pin: GPIO33
    name: "Mouvement droite"
    device_class: motion
  - platform: gpio
    pin:
      number: GPIO19
      inverted: true
      mode:
          input: true
          pullup: true
    filters:
      - delayed_on: 15s
      - delayed_off: 15s
    name: "Presence gauche"
    device_class: occupancy
  - platform: gpio
    pin:
      number: GPIO18
      inverted: true
      mode:
          input: true
          pullup: true
    filters:
      - delayed_on: 15s
      - delayed_off: 15s
    name: "Presence droite"
    device_class: occupancy

light:
  - id: led_gauche
    name: "lumière gauche"
    #icon: "mdi:heart"
    #entity_category: config
    platform: neopixelbus
    type: GRB
    variant: WS2812
    pin: GPIO22
    num_leds: 120
    method:
      type: esp32_rmt
      channel: 0
    effects:
      - pulse:
          name: "Fast Pulse"
          transition_length: 0.5s
          update_interval: 0.5s
      - pulse:
          name: "Slow Pulse"
          # transition_length: 1s      # defaults to 1s
          update_interval: 2s
      - pulse:
      - random:
      - strobe:
      - flicker:
      - addressable_rainbow:
      - addressable_color_wipe:
      - addressable_scan:
      - addressable_twinkle:
      - addressable_random_twinkle:
      - addressable_fireworks:
      - addressable_flicker:
      - addressable_christmas:
          bit_size: 5
          blank_size: 5
      - addressable_stars:
          stars_probability: 80%
  - id: led_droite
    name: "lumière droite"
    #icon: "mdi:heart"
    #entity_category: config
    platform: neopixelbus
    type: GRB
    variant: WS2812
    pin: GPIO21
    num_leds: 120
    method:
      type: esp32_rmt
      channel: 1
    effects:
      - pulse:
          name: "Fast Pulse"
          transition_length: 0.5s
          update_interval: 0.5s
      - pulse:
          name: "Slow Pulse"
          # transition_length: 1s      # defaults to 1s
          update_interval: 2s
      - pulse:
      - random:
      - strobe:
      - flicker:
      - addressable_rainbow:
      - addressable_color_wipe:
      - addressable_scan:
      - addressable_twinkle:
      - addressable_random_twinkle:
      - addressable_fireworks:
      - addressable_flicker:
      - addressable_christmas:
          bit_size: 5
          blank_size: 5
      - addressable_stars:
          stars_probability: 80%